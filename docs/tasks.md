Below is an ultra-granular **build queue of 35 bite-size tasks** tailored to the Mac-first stack you just approved.

Each card touches exactly  **one concern** , has an unambiguous  **Start → End** , and finishes with a **quick acceptance test** you can run locally before the engineering LLM picks up the next card.

---

## TL;DR — What you'll deliver

You will ❶ stand up ROS 2 + Gazebo via Homebrew, ❷ build 2×Transport + 1×Excavator fleet with lunar-low-g + regolith piles, ❸ wrap it in a Gymnasium env and train a PPO task-planner that hot-swaps transporters to keep the mothership digging 24/7, and ❹ surface KPIs (kg/day, SOC, localization drift) through Streamlit + InfluxDB—all without touching Kubernetes or cloud infra. Every third task produces a new "green bar" so the demo never drifts.

---

## Task Board

| #            | Tiny, testable task                                                | Start → End                                                                                                                                                                                                                                                                                                                                                                                             | Acceptance test                                                                                                                                                                                     |
| ------------ | ------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **01** | **Bootstrap Git repo**(`lunar-fleet-twin/`)                | no repo → repo on GitHub                                                                                                                                                                                                                                                                                                                                                                                | `git clone`succeeds                                                                                                                                                                               |
| **02** | Add**`.env.example`**& Pre-commit hooks                          | none → file + hook committed                                                                                                                                                                                                                                                                                                                                                                            | `pre-commit run --all-files`passes                                                                                                                                                                |
| **03** | Write**`mac-setup.md`**with brew commands                        | empty → doc lists `brew install ros-humble-desktop gazebo11`etc. ([docs.ros.org](https://docs.ros.org/en/humble/Installation/Alternatives/macOS-Development-Setup.html?utm_source=chatgpt.com "macOS (source) — ROS 2 Documentation: Humble documentation"),[classic.gazebosim.org](https://classic.gazebosim.org/tutorials?tut=install_on_mac&utm_source=chatgpt.com "Install Gazebo on Mac (using homebrew)")) | reviewer opens file                                                                                                                                                                                 |
| **04** | Script**`scripts/venv.sh`**to create Python venv                 | none → executable script                                                                                                                                                                                                                                                                                                                                                                                | `bash scripts/venv.sh`drops an `.venv/`dir                                                                                                                                                      |
| **05** | Homebrew-install**ROS 2 Humble**                             | not installed →`ros2 --version`works ([docs.ros.org](https://docs.ros.org/en/humble/Installation/Alternatives/macOS-Development-Setup.html?utm_source=chatgpt.com "macOS (source) — ROS 2 Documentation: Humble documentation"))                                                                                                                                                                           | `ros2 --version`prints                                                                                                                                                                            |
| **06** | Homebrew-install**Gazebo 11**                                | missing →`gzserver --version`prints ([classic.gazebosim.org](https://classic.gazebosim.org/tutorials?tut=install_on_mac&utm_source=chatgpt.com "Install Gazebo on Mac (using homebrew)"))                                                                                                                                                                                                                   | binary responds                                                                                                                                                                                     |
| **07** | Create**ROS workspace**(`ros2_ws/src`)                     | dir empty →`colcon build`ok ([docs.ros.org](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html?utm_source=chatgpt.com "Using colcon to build packages — ROS 2 Documentation"))ˇ                                                                                                                                                                                        |                                                                                                                                                                                                     |
| **08** | Add**unit test template**(`tests/unit/test_dummy.py`)      | none → pytest passes                                                                                                                                                                                                                                                                                                                                                                                    | `pytest -q`= 1 passed                                                                                                                                                                             |
| **09** | **URDF stub**for Transport rover in `sim/models/`          | none → loads in RViz                                                                                                                                                                                                                                                                                                                                                                                    | `ros2 launch sim view_stub.launch.py`shows model                                                                                                                                                  |
| **10** | **Headless world launch**(`sim/launch/headless.launch.py`) | CLI only → launch file exists                                                                                                                                                                                                                                                                                                                                                                           | `ros2 launch sim headless.launch.py`exits 0                                                                                                                                                       |
| **11** | **Custom gravity plugin**(1⁄6 g) in C++                     | none →`.so`builds                                                                                                                                                                                                                                                                                                                                                                                     | topic `/world/gravity`≈ -1.63 m s⁻²                                                                                                                                                            |
| **12** | World file referencing gravity plugin                              | flat plane →`south_pole.world`loads                                                                                                                                                                                                                                                                                                                                                                   | digger "floats" correctly                                                                                                                                                                         |
| **13** | Add**`fleet_msgs`**pkg (kg, SOC, pose msgs)                      | no msgs →`ros2 interface show`ok                                                                                                                                                                                                                                                                                                                                                                      | compiles in workspace                                                                                                                                                                               |
| **14** | Skeleton**`fleet_core`node**echoing `/cmd_vel`                 | none → node publishes                                                                                                                                                                                                                                                                                                                                                                                   | `ros2 topic echo /cmd_vel`prints                                                                                                                                                                  |
| **15** | Record**rosbag2**log script (`scripts/rec.sh`)             | none → script saves file                                                                                                                                                                                                                                                                                                                                                                                | bag > 0 KB on disk ([docs.ros.org](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html?utm_source=chatgpt.com "Using colcon to build packages — ROS 2 Documentation")) |
| **16** | **Streamlit dashboard**stub (`dashboard/app.py`)           | none → app prints "Hello"                                                                                                                                                                                                                                                                                                                                                                             | `streamlit run dashboard/app.py`opens browser                                                                                                                                                     |
| **17** | Homebrew-install**InfluxDB v2**(optional)                    | missing →`influx version`                                                                                                                                                                                                                                                                                                                                                                             | command returns ✔ ([formulae.brew.sh](https://formulae.brew.sh/formula/influxdb?utm_source=chatgpt.com "influxdb - Homebrew Formulae"))                                                                  |
| **18** | Homebrew-install**Grafana**& service script                  | missing →`brew services start grafana`succeeds ([grafana.com](https://grafana.com/docs/grafana/latest/setup-grafana/installation/mac/?utm_source=chatgpt.com "Install Grafana on macOS"))                                                                                                                                                                                                                   | `curl localhost:3000`returns login HTML                                                                                                                                                           |
| **19** | Bridge `/soc`topic to**Influx**(or Streamlit)              | none → python bridge publishes                                                                                                                                                                                                                                                                                                                                                                          | query or chart shows time-series                                                                                                                                                                    |
| **20** | **Gymnasium env wrapper**(`rl/envs/fleet_env.py`)          | env absent →`gym.make`works ([pypi.org](https://pypi.org/project/gymnasium/?utm_source=chatgpt.com "gymnasium - PyPI"))                                                                                                                                                                                                                                                                                     | `env.reset()`returns ndarray                                                                                                                                                                      |
| **21** | Unit test:`action_space.n == 5`                                  | none → pytest passes                                                                                                                                                                                                                                                                                                                                                                                    | CI green                                                                                                                                                                                            |
| **22** | `pip install stable-baselines3`in venv                           | dep missing → import ok ([stable-baselines3.readthedocs.io](https://stable-baselines3.readthedocs.io/en/master/guide/install.html?utm_source=chatgpt.com "Installation — Stable Baselines3 2.6.1a1 documentation"))                                                                                                                                                                                          | `python -c "import stable_baselines3"`                                                                                                                                                            |
| **23** | **Training script**1 k steps (`rl/training/train.py`)      | none → saves `ppo.zip`                                                                                                                                                                                                                                                                                                                                                                                | file exists, size > 0                                                                                                                                                                               |
| **24** | **Eval notebook**(`rl/eval/reward.ipynb`)                  | none → curve plotted                                                                                                                                                                                                                                                                                                                                                                                    | screenshot added to repo                                                                                                                                                                            |
| **25** | **Smoke test** : run 200 steps, assert `mean_reward > 0`   | none → CI step green                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                     |
| **26** | Add**power_manager**node publishing SOC curve                | none → topic `/soc`updates                                                                                                                                                                                                                                                                                                                                                                            | dig loop consumes battery                                                                                                                                                                           |
| **27** | **Second transport rover** URDF (`transport_rover_2.urdf`) | 1 rover → 2 rovers in sim                                                                                                                                                                                                                                                                                                                                                                               | `ros2 topic list` shows `/transport_2/` namespace                                                                                                                                                |
| **28** | **Excavator URDF** model (`excavator.urdf`)                | no excavator → mothership spawned                                                                                                                                                                                                                                                                                                                                                                       | excavator arm moves, publishes `/excavated_kg`                                                                                                                                                   |
| **29** | **Regolith piles** in world file                             | empty terrain → piles scattered                                                                                                                                                                                                                                                                                                                                                                         | Gazebo shows 3+ regolith mounds                                                                                                                                                                    |
| **30** | **Fleet coordinator** node for hot-swapping                  | single agent → multi-agent dispatcher                                                                                                                                                                                                                                                                                                                                                                   | `/fleet_cmd` dispatches transport assignments                                                                                                                                                     |
| **31** | **Localization drift tracking** in dashboard                 | no drift metrics → pose error logged                                                                                                                                                                                                                                                                                                                                                                    | Streamlit shows `GPS error (m)` chart                                                                                                                                                            |
| **32** | **kg/day aggregation** bridge to InfluxDB                    | only SOC → excavation rate tracked                                                                                                                                                                                                                                                                                                                                                                      | dashboard shows `kg/hour` rate                                                                                                                                                                    |
| **33** | **Reward shaping** : penalty for idle excavator              | flat reward → coordinated fleet reward                                                                                                                                                                                                                                                                                                                                                                  | RL prioritizes excavator uptime                                                                                                                                                                    |
| **34** | Script**`scripts/seed_world.sh`**downloads DEM                   | none → mesh in `sim/worlds/`                                                                                                                                                                                                                                                                                                                                                                          | file size > 5 MB                                                                                                                                                                                    |
| **35** | **GitHub Actions**mac-runner (`.github/workflows/mac.yml`) | none → build badge green                                                                                                                                                                                                                                                                                                                                                                                | action runs colcon + pytest                                                                                                                                                                         |

---

## How to run acceptance tests

1. `bash mac-setup.md` up to the current task's line.
2. Execute the **Acceptance test** column command.
3. When it passes, merge / pull-request and tell the engineering LLM to fetch the next card.

---

### Key references

* ROS 2 Humble Homebrew docs ([docs.ros.org](https://docs.ros.org/en/humble/Installation/Alternatives/macOS-Development-Setup.html?utm_source=chatgpt.com "macOS (source) — ROS 2 Documentation: Humble documentation"))
* Gazebo11 Homebrew tutorial ([classic.gazebosim.org](https://classic.gazebosim.org/tutorials?tut=install_on_mac&utm_source=chatgpt.com "Install Gazebo on Mac (using homebrew)"))
* InfluxDB Homebrew formula ([formulae.brew.sh](https://formulae.brew.sh/formula/influxdb?utm_source=chatgpt.com "influxdb - Homebrew Formulae"))
* Grafana Homebrew installation guide ([grafana.com](https://grafana.com/docs/grafana/latest/setup-grafana/installation/mac/?utm_source=chatgpt.com "Install Grafana on macOS"))
* Stable-Baselines3 install instructions ([stable-baselines3.readthedocs.io](https://stable-baselines3.readthedocs.io/en/master/guide/install.html?utm_source=chatgpt.com "Installation — Stable Baselines3 2.6.1a1 documentation"))
* gymnasium PyPI page ([pypi.org](https://pypi.org/project/gymnasium/?utm_source=chatgpt.com "gymnasium - PyPI"))
* Streamlit install guide ([docs.streamlit.io](https://docs.streamlit.io/get-started/installation?utm_source=chatgpt.com "Install Streamlit"))
* Colcon build tutorial (ROS 2) ([docs.ros.org](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html?utm_source=chatgpt.com "Using colcon to build packages — ROS 2 Documentation"))
* Extra ROS 2 macOS notes (GUI workaround) ([docs.ros.org](https://docs.ros.org/en/humble/Tutorials/Advanced/Simulators/Webots/Installation-MacOS.html?utm_source=chatgpt.com "Installation (macOS) — ROS 2 Documentation: Humble documentation"))
* InfluxDB OSS v2 docs (mac) ([docs.influxdata.com](https://docs.influxdata.com/influxdb/v2/install/?utm_source=chatgpt.com "Install InfluxDB OSS v2"))

With this micro-task board you'll advance in deterministic, test-driven hops, building a complete multi-robot fleet coordination system with reinforcement learning task planning and comprehensive telemetry. Every commit delivers measurable progress toward the final 24/7 excavation demo. Good luck!ˇ
